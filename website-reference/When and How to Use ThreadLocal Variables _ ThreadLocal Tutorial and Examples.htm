<!DOCTYPE html>
<!-- saved from url=(0090)https://howtodoinjava.com/java/multi-threading/when-and-how-to-use-thread-local-variables/ -->
<html lang="en-US" class="jetpack-lazy-images-js-enabled"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/osd.js"></script><script type="text/javascript" async="" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/publishertag.prebid.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><link media="all" href="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/autoptimize_2037e26690c2f7bb7e1181c5372909c1.css" rel="stylesheet"><title>When and How to Use ThreadLocal Variables | ThreadLocal Tutorial and Examples</title><meta name="description" content="Most common use of threadlocal is when you have some object that is not thread-safe, but you want to avoid synchronizing access to that object using synchronized keyword/block. Instead, give each thread its own instance of the object to work with."><meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><link rel="canonical" href="https://howtodoinjava.com/java/multi-threading/when-and-how-to-use-thread-local-variables/"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="When and How to Use ThreadLocal Variables | ThreadLocal Tutorial and Examples"><meta property="og:description" content="Most common use of threadlocal is when you have some object that is not thread-safe, but you want to avoid synchronizing access to that object using synchronized keyword/block. Instead, give each thread its own instance of the object to work with."><meta property="og:url" content="http://howtodoinjava.com/java/multi-threading/when-and-how-to-use-thread-local-variables/"><meta property="og:site_name" content="HowToDoInJava"><meta property="article:publisher" content="http://www.facebook.com/HowToDoInJAVA"><meta property="article:author" content="http://www.facebook.com/HowToDoInJAVA"><meta property="article:published_time" content="2014-12-24T10:03:23+00:00"><meta property="article:modified_time" content="2020-12-25T19:01:28+00:00"><meta property="og:image" content="https://i0.wp.com/howtodoinjava.com/wp-content/uploads/2015/04/howtodoinjava_logo-e1434552355773.png?fit=200%2C200&amp;ssl=1"><meta property="og:image:width" content="200"><meta property="og:image:height" content="200"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@HowToDoInJAVA"><meta name="twitter:site" content="@HowToDoInJAVA"><meta name="twitter:label1" content="Written by"><meta name="twitter:data1" content="Lokesh Gupta"><meta name="twitter:label2" content="Est. reading time"><meta name="twitter:data2" content="5 minutes"> <script async="" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/apstag.js"></script><script type="text/javascript" async="" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/f(8).txt"></script><script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"http://howtodoinjava.com/#website","url":"http://howtodoinjava.com/","name":"HowToDoInJava","description":"","publisher":{"@id":"http://howtodoinjava.com/#/schema/person/4976af58f6c3f73d00db5f58af2bde12"},"potentialAction":[{"@type":"SearchAction","target":"http://howtodoinjava.com/?s={search_term_string}","query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"WebPage","@id":"http://howtodoinjava.com/java/multi-threading/when-and-how-to-use-thread-local-variables/#webpage","url":"http://howtodoinjava.com/java/multi-threading/when-and-how-to-use-thread-local-variables/","name":"When and How to Use ThreadLocal Variables | ThreadLocal Tutorial and Examples","isPartOf":{"@id":"http://howtodoinjava.com/#website"},"datePublished":"2014-12-24T10:03:23+00:00","dateModified":"2020-12-25T19:01:28+00:00","description":"Most common use of threadlocal is when you have some object that is not thread-safe, but you want to avoid synchronizing access to that object using synchronized keyword/block. Instead, give each thread its own instance of the object to work with.","breadcrumb":{"@id":"http://howtodoinjava.com/java/multi-threading/when-and-how-to-use-thread-local-variables/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["http://howtodoinjava.com/java/multi-threading/when-and-how-to-use-thread-local-variables/"]}]},{"@type":"BreadcrumbList","@id":"http://howtodoinjava.com/java/multi-threading/when-and-how-to-use-thread-local-variables/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"http://howtodoinjava.com/","url":"http://howtodoinjava.com/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://howtodoinjava.com/java/","url":"https://howtodoinjava.com/java/","name":"Java"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://howtodoinjava.com/java/multi-threading/","url":"https://howtodoinjava.com/java/multi-threading/","name":"Multi-threading"}},{"@type":"ListItem","position":4,"item":{"@type":"WebPage","@id":"http://howtodoinjava.com/java/multi-threading/when-and-how-to-use-thread-local-variables/","url":"http://howtodoinjava.com/java/multi-threading/when-and-how-to-use-thread-local-variables/","name":"Java ThreadLocal Variables &#8211; When and How to Use?"}}]},{"@type":["Article","TechArticle"],"@id":"http://howtodoinjava.com/java/multi-threading/when-and-how-to-use-thread-local-variables/#article","isPartOf":{"@id":"http://howtodoinjava.com/java/multi-threading/when-and-how-to-use-thread-local-variables/#webpage"},"author":{"@id":"http://howtodoinjava.com/#/schema/person/4976af58f6c3f73d00db5f58af2bde12"},"headline":"Java ThreadLocal Variables &#8211; When and How to Use?","datePublished":"2014-12-24T10:03:23+00:00","dateModified":"2020-12-25T19:01:28+00:00","mainEntityOfPage":{"@id":"http://howtodoinjava.com/java/multi-threading/when-and-how-to-use-thread-local-variables/#webpage"},"commentCount":6,"publisher":{"@id":"http://howtodoinjava.com/#/schema/person/4976af58f6c3f73d00db5f58af2bde12"},"keywords":"Multi Threading,ThreadLocal","articleSection":"Java Concurrency","inLanguage":"en-US"},{"@type":["Person","Organization"],"@id":"http://howtodoinjava.com/#/schema/person/4976af58f6c3f73d00db5f58af2bde12","name":"Lokesh Gupta","image":{"@type":"ImageObject","@id":"http://howtodoinjava.com/#personlogo","inLanguage":"en-US","url":"https://i2.wp.com/howtodoinjava.com/wp-content/uploads/2015/05/howtodoinjava_logo-55696c1cv1_site_icon.png?fit=512%2C512&ssl=1","width":512,"height":512,"caption":"Lokesh Gupta"},"logo":{"@id":"http://howtodoinjava.com/#personlogo"},"description":"A family guy with fun loving nature. Love computers, programming and solving everyday problems. Find me on Facebook and Twitter.","sameAs":["http://howtodoinjava.com/","http://www.facebook.com/HowToDoInJAVA","https://twitter.com/HowToDoInJAVA"]}]}</script> <link rel="dns-prefetch" href="https://s.w.org/"><link rel="dns-prefetch" href="https://i0.wp.com/"><link rel="dns-prefetch" href="https://i1.wp.com/"><link rel="dns-prefetch" href="https://i2.wp.com/"><link rel="dns-prefetch" href="https://c0.wp.com/"><link rel="stylesheet" id="dashicons-css" href="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/dashicons.min.css" type="text/css" media="all"> <script type="text/javascript" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/jquery.min.js" id="jquery-core-js"></script> <script type="text/javascript" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/jquery-migrate.min.js" id="jquery-migrate-js"></script> <script type="text/javascript" id="wp-night-mode-js-extra">/*  */
var wpnmObject = {"button_html":"<div class=\"wpnm-button style-2\">\n                            <div class=\"wpnm-button-inner-left\"><\/div>\n                            <div class=\"wpnm-button-inner\"><\/div>\n                        <\/div>","default":"","server_time":"1614015088","turn_on_time":"","turn_off_time":""};
/*  */</script> <script type="text/javascript" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/wp-night-mode-public.js" id="wp-night-mode-js"></script> <script type="text/javascript" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/responsive-menu.js" id="eleven40-responsive-menu-js"></script> <link rel="https://api.w.org/" href="https://howtodoinjava.com/wp-json/"><link rel="alternate" type="application/json" href="https://howtodoinjava.com/wp-json/wp/v2/posts/4381"><meta name="google-site-verification" content="EV_Uq1MFIe3lcKLlf4xhcabIz-68zGeWx8pjwQH3pB8"><meta name="msvalidate.01" content="C71A4DAE3450D101003DA6DCE7D44ADE"> <script type="text/javascript">document.documentElement.classList.add(
					'jetpack-lazy-images-js-enabled'
				);</script> <link rel="icon" href="https://i2.wp.com/howtodoinjava.com/wp-content/uploads/2015/05/howtodoinjava_logo-55696c1cv1_site_icon.png?fit=32%2C32&amp;ssl=1" sizes="32x32"><link rel="icon" href="https://i2.wp.com/howtodoinjava.com/wp-content/uploads/2015/05/howtodoinjava_logo-55696c1cv1_site_icon.png?fit=192%2C192&amp;ssl=1" sizes="192x192"><link rel="apple-touch-icon" href="https://i2.wp.com/howtodoinjava.com/wp-content/uploads/2015/05/howtodoinjava_logo-55696c1cv1_site_icon.png?fit=180%2C180&amp;ssl=1"><meta name="msapplication-TileImage" content="https://i2.wp.com/howtodoinjava.com/wp-content/uploads/2015/05/howtodoinjava_logo-55696c1cv1_site_icon.png?fit=270%2C270&amp;ssl=1"><script type="text/javascript" async="" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/howtodoinjava.js"></script><link rel="stylesheet" type="text/css" href="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/shCore.css"><link rel="stylesheet" type="text/css" href="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/shThemeMidnight.css"><script async="" type="text/javascript" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/gpt.js" dropped-by="bsaoptimize"></script><meta http-equiv="origin-trial" content="A9ZgbRtm4pU3oZiuNzOsKcC8ppFSZdcjP2qYcdQrFKVzkmiWH1kdYY1Mi9x7G8+PS8HV9Ha9Cz0gaMdKsiVZIgMAAAB7eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiVHJ1c3RUb2tlbnMiLCJleHBpcnkiOjE2MjYyMjA3OTksImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"><meta http-equiv="origin-trial" content="A3HucHUo1oW9s+9kIKz8mLkbcmdaj5lxt3eiIMp1Nh49dkkBlg1Fhg4Fd/r0vL69mRRA36YutI9P/lJUfL8csQoAAACFeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQ29udmVyc2lvbk1lYXN1cmVtZW50IiwiZXhwaXJ5IjoxNjI2MjIwNzk5LCJpc1N1YmRvbWFpbiI6dHJ1ZSwiaXNUaGlyZFBhcnR5Ijp0cnVlfQ=="><script src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/pubads_impl_2021021701.js" async=""></script><script src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/cse_element__en.js" type="text/javascript"></script><link type="text/css" rel="stylesheet" href="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/default+en.css"><link type="text/css" rel="stylesheet" href="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/default.css"><style type="text/css">.gsc-control-cse{font-family:verdana, arial, sans-serif}.gsc-control-cse .gsc-table-result{font-family:verdana, arial, sans-serif}.gsc-refinementsGradient{background:linear-gradient(to left,rgba(255,255,255,1),rgba(255,255,255,0))}.gsc-control-cse{border-color:#FFFFFF;background-color:#FFFFFF}input.gsc-input,.gsc-input-box,.gsc-input-box-hover,.gsc-input-box-focus{border-color:#F9F9F9}.gsc-search-button-v2,.gsc-search-button-v2:hover,.gsc-search-button-v2:focus{border-color:#5890FF;background-color:#5890FF;background-image:none;filter:none}.gsc-search-button-v2 svg{fill:#FFFFFF}.gsc-tabHeader.gsc-tabhActive,.gsc-refinementHeader.gsc-refinementhActive{color:#CCCCCC;border-color:#CCCCCC;background-color:#FFFFFF}.gsc-tabHeader.gsc-tabhInactive,.gsc-refinementHeader.gsc-refinementhInactive{color:#CCCCCC;border-color:#CCCCCC;background-color:#FFFFFF}.gsc-webResult.gsc-result,.gsc-results .gsc-imageResult{border-color:#FFFFFF;background-color:#FFFFFF}.gsc-webResult.gsc-result:hover{border-color:#FFFFFF;background-color:#FFFFFF}.gs-webResult.gs-result a.gs-title:link,.gs-webResult.gs-result a.gs-title:link b,.gs-imageResult a.gs-title:link,.gs-imageResult a.gs-title:link b{color:#3367D6}.gs-webResult.gs-result a.gs-title:visited,.gs-webResult.gs-result a.gs-title:visited b,.gs-imageResult a.gs-title:visited,.gs-imageResult a.gs-title:visited b{color:#3367D6}.gs-webResult.gs-result a.gs-title:hover,.gs-webResult.gs-result a.gs-title:hover b,.gs-imageResult a.gs-title:hover,.gs-imageResult a.gs-title:hover b{color:#0000CC}.gs-webResult.gs-result a.gs-title:active,.gs-webResult.gs-result a.gs-title:active b,.gs-imageResult a.gs-title:active,.gs-imageResult a.gs-title:active b{color:#3367D6}.gsc-cursor-page{color:#3367D6}a.gsc-trailing-more-results:link{color:#3367D6}.gs-webResult:not(.gs-no-results-result):not(.gs-error-result) .gs-snippet,.gs-fileFormatType{color:#000000}.gs-webResult div.gs-visibleUrl{color:#999999}.gs-webResult div.gs-visibleUrl-short{color:#999999}.gsc-cursor-box{border-color:#FFFFFF}.gsc-results .gsc-cursor-box .gsc-cursor-page{border-color:#CCCCCC;background-color:#FFFFFF;color:#CCCCCC}.gsc-results .gsc-cursor-box .gsc-cursor-current-page{border-color:#CCCCCC;background-color:#FFFFFF;color:#CCCCCC}.gsc-webResult.gsc-result.gsc-promotion{border-color:#F3F3F3;background-color:#F3F3F3}.gsc-completion-title{color:#3367D6}.gsc-completion-snippet{color:#000000}.gs-promotion a.gs-title:link,.gs-promotion a.gs-title:link *,.gs-promotion .gs-snippet a:link{color:#3367D6}.gs-promotion a.gs-title:visited,.gs-promotion a.gs-title:visited *,.gs-promotion .gs-snippet a:visited{color:#3367D6}.gs-promotion a.gs-title:hover,.gs-promotion a.gs-title:hover *,.gs-promotion .gs-snippet a:hover{color:#0000CC}.gs-promotion a.gs-title:active,.gs-promotion a.gs-title:active *,.gs-promotion .gs-snippet a:active{color:#3367D6}.gs-promotion .gs-snippet,.gs-promotion .gs-title .gs-promotion-title-right,.gs-promotion .gs-title .gs-promotion-title-right *{color:#000000}.gs-promotion .gs-visibleUrl,.gs-promotion .gs-visibleUrl-short{color:#999999}.gcsc-find-more-on-google{color:#3367D6}.gcsc-find-more-on-google-magnifier{fill:#3367D6}</style><link rel="preload" href="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/f(9).txt" as="script"><script type="text/javascript" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/f(9).txt"></script><link rel="prefetch" href="https://0bf7ded62e7591da487d87b86e841a28.safeframe.googlesyndication.com/safeframe/1-0-37/html/container.html"><link rel="prefetch" href="https://tpc.googlesyndication.com/safeframe/1-0-37/html/container.html"><link rel="preload" href="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/f(9).txt" as="script"><script type="text/javascript" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/f(9).txt"></script></head><body class="post-template-default single single-post postid-4381 single-format-standard custom-header header-full-width sidebar-content-sidebar genesis-breadcrumbs-visible genesis-footer-widgets-visible" data-new-gr-c-s-check-loaded="14.996.0" data-gr-ext-installed=""><div class="site-container"><header class="site-header"><div class="wrap"><div class="title-area"><p class="site-title"><a href="https://howtodoinjava.com/" title="HowToDoInJava">HowToDoInJava</a></p></div><nav class="nav-primary" aria-label="Main"><div class="wrap"><div class="responsive-menu-icon"></div><ul id="menu-category-menu" class="menu genesis-nav-menu menu-primary responsive-menu"><li id="menu-item-13485" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13485"><a href="https://howtodoinjava.com/python-tutorial/"><span>Python</span></a></li><li id="menu-item-13486" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13486"><a href="https://howtodoinjava.com/java/basics/java-tutorial/"><span>Java</span></a></li><li id="menu-item-10224" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-10224"><a href="https://howtodoinjava.com/spring-boot-tutorials/"><span>Spring Boot</span></a></li><li id="menu-item-13046" class="wp-night-mode menu-item menu-item-type-custom menu-item-object-custom menu-item-13046"><div class="wpnm-button style-2">
                            <div class="wpnm-button-inner-left"></div>
                            <div class="wpnm-button-inner"></div>
                        </div></li></ul></div></nav></div></header><div class="site-inner"><div class="wrap"><div class="content-sidebar-wrap"><main class="content"><div class="breadcrumb"><span><span><a href="https://howtodoinjava.com/"><i class="fa fa-home"></i> Home</a> / <span><a href="https://howtodoinjava.com/java/">Java</a> / <span><a href="https://howtodoinjava.com/java/multi-threading/">Multi-threading</a> / <span class="breadcrumb_last" aria-current="page">Java ThreadLocal Variables – When and How to Use?</span></span></span></span></span></div><article class="post-4381 post type-post status-publish format-standard category-multi-threading tag-multi-threading tag-threadlocal entry" aria-label="Java ThreadLocal Variables – When and How to Use?"><header class="entry-header"><h1 class="entry-title">Java ThreadLocal Variables – When and How to Use?</h1>
</header><div class="entry-content"><p>Today, one of the most critical aspects of a concurrent application is shared data. When you create thread that implements the <code>Runnable</code> interface and then start various <code>Thread</code> objects using the same <code>Runnable</code> object, all the threads share the same attributes that are defined inside the runnable object. This essentially means that if you change any attribute in a thread, all the threads will be affected by this change and will see the modified value by first thread. Sometimes it is desired behavior e.g. multiple threads increasing / decreasing the same counter variable; but sometimes you want to ensure that every thread MUST work on it’s own copy of thread instance and does not affect others data.</p><h2>When to use ThreadLocal?</h2><p>For example, consider you are working on a eCommerce application. You have a requirement to generate a unique transaction id for each and every customer request this controller process and you need to pass this transaction id to the business methods in manager/DAO classes for logging purpose. One solution could be passing this transaction id as a parameter to all the business methods. But this is not a good solution as the code is redundant and unnecessary.</p><p>To solve that, here you can use <code>ThreadLocal</code> variable. You can generate a transaction id in controller OR any pre-processor interceptor; and set this transaction id in the <code>ThreadLocal</code>. After this, whatever the methods, that this controller calls, they all can access this transaction id from the threadlocal. Also note that application controller will be servicing more that one request at a time and since each request is processed in separate thread at framework level, the transaction id will be unique to each thread and will be accessible from all over the thread’s execution path.</p><blockquote><p><strong>Read More : <a href="https://howtodoinjava.com/resteasy/share-context-data-with-jax-rs-resteasyproviderfactory/" title="Share context data with JAX-RS ResteasyProviderFactory" target="_blank" rel="noopener noreferrer">Share context data with JAX-RS ResteasyProviderFactory (ThreadLocalStack Example)</a></strong></p></blockquote><h2>Inside ThreadLocal Class?</h2><p>The Java Concurrency API provides a clean mechanism for thread-local variables using <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/ThreadLocal.html" title="ThreadLocal" target="_blank" rel="noopener noreferrer"><strong>ThreadLocal</strong></a> class with a very good performance.</p><div><div id="highlighter_990417" class="syntaxhighlighter nogutter  java"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">ThreadLocal&lt;T&gt; </code><code class="java keyword">extends</code> <code class="java plain">Object {...}</code></div></div></td></tr></tbody></table></div></div><p>This class provides thread-local variables. These variables differ from their normal counterparts in that each thread that accesses one (via its get or set method) has its own, independently initialized copy of the variable. <code>ThreadLocal</code> instances are typically <strong><em>private static</em></strong> fields in classes that wish to associate state with a thread (e.g., a user ID or Transaction ID).</p><p>This class has following methods:</p><ol><li><strong>get()</strong> : Returns the value in the current thread’s copy of this thread-local variable.</li><li><strong>initialValue()</strong> : Returns the current thread’s “initial value” for this thread-local variable.</li><li><strong>remove()</strong> : Removes the current thread’s value for this thread-local variable.</li><li><strong>set(T value)</strong> : Sets the current thread’s copy of this thread-local variable to the specified value.</li></ol><h2>How to use ThreadLocal?</h2><p>Below example uses two thread local variables i.e. <em>threadId</em> and <em>startDate</em>. Both have been defined as “<strong><em>private static</em></strong>” fields as recommended. ‘<em>threadId</em>‘ will be used to identify the thread which is currently running and ‘<em>startDate</em>‘ will be used to get the time when thread started it’s execution. Above information will be printed in console to verify that each thread has maintained it’s own copy of variables.</p><div><div id="highlighter_617416" class="syntaxhighlighter nogutter  java"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">class</code> <code class="java plain">DemoTask </code><code class="java keyword">implements</code> <code class="java plain">Runnable</code></div><div class="line number2 index1 alt1"><code class="java plain">{</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Atomic integer containing the next thread ID to be assigned</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">final</code> <code class="java plain">AtomicInteger&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nextId&nbsp;&nbsp; = </code><code class="java keyword">new</code> <code class="java plain">AtomicInteger(</code><code class="java value">0</code><code class="java plain">);</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Thread local variable containing each thread's ID</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">final</code> <code class="java plain">ThreadLocal&lt;Integer&gt; threadId = </code><code class="java keyword">new</code> <code class="java plain">ThreadLocal&lt;Integer&gt;()</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Override</code></div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">protected</code> <code class="java plain">Integer initialValue()</code></div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">nextId.getAndIncrement();</code></div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">};</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Returns the current thread's unique ID, assigning it if necessary</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">int</code> <code class="java plain">getThreadId()</code></div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">threadId.get();</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Returns the current thread's starting timestamp</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">final</code> <code class="java plain">ThreadLocal&lt;Date&gt; startDate = </code><code class="java keyword">new</code> <code class="java plain">ThreadLocal&lt;Date&gt;()</code></div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">protected</code> <code class="java plain">Date initialValue()</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java keyword">new</code> <code class="java plain">Date();</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">};</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number31 index30 alt2">&nbsp;</div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Override</code></div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">run()</code></div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.printf(</code><code class="java string">"Starting Thread: %s : %s\n"</code><code class="java plain">, getThreadId(), startDate.get());</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">TimeUnit.SECONDS.sleep((</code><code class="java keyword">int</code><code class="java plain">) Math.rint(Math.random() * </code><code class="java value">10</code><code class="java plain">));</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(InterruptedException e)</code></div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code></div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">e.printStackTrace();</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.printf(</code><code class="java string">"Thread Finished: %s : %s\n"</code><code class="java plain">, getThreadId(), startDate.get());</code></div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number45 index44 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div><p>Now to verify that variables essentially are able to maintain their state irrespective of multiple initializations for multiple threads, let’s create three instances of this task; start the threads; and then verify the information they print in console.</p><div><div id="highlighter_646474" class="syntaxhighlighter nogutter  java"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java plain">Starting Thread: </code><code class="java value">0</code> <code class="java plain">: Wed Dec </code><code class="java value">24</code> <code class="java value">15</code><code class="java plain">:</code><code class="java value">04</code><code class="java plain">:</code><code class="java value">40</code> <code class="java plain">IST </code><code class="java value">2014</code></div><div class="line number2 index1 alt1"><code class="java plain">Thread Finished: </code><code class="java value">0</code> <code class="java plain">: Wed Dec </code><code class="java value">24</code> <code class="java value">15</code><code class="java plain">:</code><code class="java value">04</code><code class="java plain">:</code><code class="java value">40</code> <code class="java plain">IST </code><code class="java value">2014</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="java plain">Starting Thread: </code><code class="java value">1</code> <code class="java plain">: Wed Dec </code><code class="java value">24</code> <code class="java value">15</code><code class="java plain">:</code><code class="java value">04</code><code class="java plain">:</code><code class="java value">42</code> <code class="java plain">IST </code><code class="java value">2014</code></div><div class="line number5 index4 alt2"><code class="java plain">Thread Finished: </code><code class="java value">1</code> <code class="java plain">: Wed Dec </code><code class="java value">24</code> <code class="java value">15</code><code class="java plain">:</code><code class="java value">04</code><code class="java plain">:</code><code class="java value">42</code> <code class="java plain">IST </code><code class="java value">2014</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="java plain">Starting Thread: </code><code class="java value">2</code> <code class="java plain">: Wed Dec </code><code class="java value">24</code> <code class="java value">15</code><code class="java plain">:</code><code class="java value">04</code><code class="java plain">:</code><code class="java value">44</code> <code class="java plain">IST </code><code class="java value">2014</code></div><div class="line number8 index7 alt1"><code class="java plain">Thread Finished: </code><code class="java value">2</code> <code class="java plain">: Wed Dec </code><code class="java value">24</code> <code class="java value">15</code><code class="java plain">:</code><code class="java value">04</code><code class="java plain">:</code><code class="java value">44</code> <code class="java plain">IST </code><code class="java value">2014</code></div></div></td></tr></tbody></table></div></div><p>In above output, sequence of printed statement will vary everytime. I have put them in sequence so that we can clearly identify that thread local values are kept safe for each thread instance; and never intermixed. Try yourself.</p><div class="noticeboxesde bluenoticebox">Most common use of thread local is when you have some object that is not thread-safe, but you want to avoid synchronizing access to that object using synchronized keyword/block. Instead, give each thread its own instance of the object to work with.<br>
A good alternative to synchronization or threadlocal is to make the variable a local variable. Local variables are always thread safe. The only thing which may prevent you to do this is your application design constraints.</div><div class="noticeboxesde rednoticebox">In wabapp server, it may be keep a thread pool, so a ThreadLocal var should be removed before response to the client, since current thread may be reused by next request. Also, if you do not clean up when you’re done, any references it holds to classes loaded as part of a deployed webapp will remain in the permanent heap and will never get garbage collected.</div><p><strong>Happy Learning !!</strong></p><div class="helpful "><div class="helpful-header"><h2 class="helpful-headline">Was this post helpful?</h2></div><div class="helpful-content" role="alert">
<span>Let us know if you liked the post. That’s the only way we can improve.</span></div><div class="helpful-controls"><div>
<button class="helpful-pro helpful-button" type="button" data-value="pro" data-post="4381" role="button">
Yes							</button></div><div>
<button class="helpful-contra helpful-button" type="button" data-value="contra" data-post="4381" role="button">
No							</button></div></div></div><div class="pub-ad" style="text-align: center; text-align: -webkit-center; margin: 30px 0px 20px;width: 100%;height: 270px;"><div id="bsa-zone_1572302701062-4_123456" data-google-query-id="COaIw-qZ_u4CFdHDwAodyzkDMQ"><div id="google_ads_iframe_/8691100/Howtodoinjava_S2S_EndofContent_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/8691100/Howtodoinjava_S2S_EndofContent_0" title="3rd party ad content" name="google_ads_iframe_/8691100/Howtodoinjava_S2S_EndofContent_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" data-google-container-id="m" style="border: 0px; vertical-align: bottom;" data-load-complete="true" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/saved_resource(3).html"></iframe></div></div></div><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul data-sharing-events-added="true"><li class="share-twitter"><a rel="nofollow noopener noreferrer" data-shared="sharing-twitter-4381" class="share-twitter sd-button share-icon" href="https://howtodoinjava.com/java/multi-threading/when-and-how-to-use-thread-local-variables/?share=twitter&amp;nb=1" target="_blank" title="Click to share on Twitter"><span>Twitter</span></a></li><li class="share-facebook"><a rel="nofollow noopener noreferrer" data-shared="sharing-facebook-4381" class="share-facebook sd-button share-icon" href="https://howtodoinjava.com/java/multi-threading/when-and-how-to-use-thread-local-variables/?share=facebook&amp;nb=1" target="_blank" title="Click to share on Facebook"><span>Facebook</span></a></li><li class="share-linkedin"><a rel="nofollow noopener noreferrer" data-shared="sharing-linkedin-4381" class="share-linkedin sd-button share-icon" href="https://howtodoinjava.com/java/multi-threading/when-and-how-to-use-thread-local-variables/?share=linkedin&amp;nb=1" target="_blank" title="Click to share on LinkedIn"><span>LinkedIn</span></a></li><li class="share-reddit"><a rel="nofollow noopener noreferrer" data-shared="" class="share-reddit sd-button share-icon" href="https://howtodoinjava.com/java/multi-threading/when-and-how-to-use-thread-local-variables/?share=reddit&amp;nb=1" target="_blank" title="Click to share on Reddit"><span>Reddit</span></a></li><li class="share-end"></li></ul></div></div></div></div><footer class="entry-footer"></footer></article><div class="after-entry widget-area"><section id="adswidget5-quick-adsense-3" class="widget widget_adswidget5-quick-adsense"><div class="widget-wrap"><div class="pub-ad developermediaBanner" style="margin-top: 10px; margin-bottom: 10px; width: 730px;height: 120px;text-align: center;"><div id="bsa-zone_1572302650478-4_123456" data-google-query-id="CMiSxuqZ_u4CFdHDwAodyzkDMQ"><div id="google_ads_iframe_/8691100/Howtodoinjava_S2S_Leaderboard_BTF_0__container__" style="border: 0pt none; display: inline-block; width: 728px; height: 90px;"><iframe frameborder="0" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/container.html" id="google_ads_iframe_/8691100/Howtodoinjava_S2S_Leaderboard_BTF_0" title="3rd party ad content" name="" scrolling="no" marginwidth="0" marginheight="0" width="728" height="90" data-is-safeframe="true" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" data-google-container-id="l" style="border: 0px; vertical-align: bottom;" data-load-complete="true"></iframe></div></div></div></div></section></div><section class="author-box"><h4 class="author-box-title">About <span itemprop="name">Lokesh Gupta</span></h4><div class="author-box-content" itemprop="description"><p>A family guy with fun loving nature. Love computers, programming and solving everyday problems.  Find me on <a href="https://facebook.com/howtodoinjava" rel="external">Facebook</a> and <a href="https://twitter.com/howtodoinjava" rel="external">Twitter</a>.</p></div></section><div class="entry-comments" id="comments"><h3>Feedback, Discussion and Comments</h3><ol class="comment-list"><li class="comment even thread-even depth-1" id="comment-64754">
<article id="article-comment-64754">
<header class="comment-header"><p class="comment-author">
<span class="comment-author-name">649239538</span></p><p class="comment-meta"><time class="comment-time">September 21, 2019</time></p>		</header><div class="comment-content"><p>The above code is still error .  The two ThreadLocal variables are still in runnable  and  not shared !</p></div>
</article></li><li class="comment odd alt thread-odd thread-alt depth-1" id="comment-14296">
<article id="article-comment-14296">
<header class="comment-header"><p class="comment-author">
<span class="comment-author-name"><a href="https://en.gravatar.com/himansu82" class="comment-author-link" rel="external nofollow">Himansu Nayak</a></span></p><p class="comment-meta"><time class="comment-time">January 2, 2015</time></p>		</header><div class="comment-content"><p>Hi Lokesh,</p><p>Going thru “ThreadLocal” i found “InheritableThreadLocal” but never found and good examples on it. Can you please explain on this and if possible can you also enlighten the internal data structure of the ThreadLocal i.e “ThreadLocalMap” and “WeekReference”</p></div>
</article><ul class="children"><li class="comment even depth-2" id="comment-26185">
<article id="article-comment-26185">
<header class="comment-header"><p class="comment-author">
<span class="comment-author-name">Dilip</span></p><p class="comment-meta"><time class="comment-time">August 13, 2017</time></p>		</header><div class="comment-content"><p>InheritabelThreadLocal is used in the situation of Parent Thread-Child Threads resource sharing.</p><p>It can be used when Child Thread wishes to utilize the local variables of it’s parent thread.</p><p>Imagine a Process which forks no. of Child threads for concurrent processing and every individual child thread needs to mark it’s completion so that Parent Thread can track (e.g. Thread Processing Completion Count)</p></div>
</article></li></ul></li><li class="comment odd alt thread-even depth-1" id="comment-14258">
<article id="article-comment-14258">
<header class="comment-header"><p class="comment-author">
<span class="comment-author-name">Binh Thanh Nguyen</span></p><p class="comment-meta"><time class="comment-time">December 29, 2014</time></p>		</header><div class="comment-content"><p>Thanks, nice post</p></div>
</article></li><li class="comment even thread-odd thread-alt depth-1" id="comment-14205">
<article id="article-comment-14205">
<header class="comment-header"><p class="comment-author">
<span class="comment-author-name">SJaziri</span></p><p class="comment-meta"><time class="comment-time">December 24, 2014</time></p>		</header><div class="comment-content"><p>Hi Lokesh,</p><p>Thank you for your interesting post.</p><p>you said in the introduction “all the threads share the same attributes that have been defined inside run() method”.</p><p>I think you wanted to say : all threads share the same attributes of the runnable object, because attributes defined inside run method are not sharable, they live in the stack and every thread has its own stack.</p></div>
</article><ul class="children"><li class="comment byuser comment-author-lokeshgupta1981 bypostauthor odd alt depth-2" id="comment-14206">
<article id="article-comment-14206">
<header class="comment-header"><p class="comment-author">
<span class="comment-author-name"><a href="https://howtodoinjava.com/" class="comment-author-link" rel="external nofollow">Lokesh Gupta</a></span></p><p class="comment-meta"><time class="comment-time">December 24, 2014</time></p>		</header><div class="comment-content"><p>You are right. It is a mistake indeed. Corrected it. Thanks for pointing out.</p></div>
</article></li></ul></li></ol></div><div id="divClosedComments"><span style="font-size: 150%;">Comments are closed on this article!</span></div></main><aside class="sidebar sidebar-primary widget-area" role="complementary" aria-label="Primary Sidebar"><section id="text-37" class="widget widget_text"><div class="widget-wrap"><h4 class="widget-title widgettitle">Search Tutorials</h4><div class="textwidget"><form action="https://howtodoinjava.com/search-results">
<input class="search-input" name="q" placeholder="Type and Press ENTER..." size="35" type="text"></form></div></div></section>
<section id="themegrill_social_icons-3" class="widget social-icons widget_social_icons"><div class="widget-wrap"><ul class="social-icons-lists icons-background-square"><li class="social-icons-list-item">
<a href="https://twitter.com/howtodoinjava" class="social-icon">
<span class="socicon socicon-twitter" style="padding: 10px; font-size: 16px; background-color: #4da7de"></span></a></li><li class="social-icons-list-item">
<a href="https://facebook.com/howtodoinjava/" class="social-icon">
<span class="socicon socicon-facebook" style="padding: 10px; font-size: 16px; background-color: #3e5b98"></span></a></li><li class="social-icons-list-item">
<a href="https://github.com/lokeshgupta1981/" class="social-icon">
<span class="socicon socicon-github" style="padding: 10px; font-size: 16px; background-color: #221e1b"></span></a></li><li class="social-icons-list-item">
<a href="https://feeds.feedburner.com/howtodoinjava" class="social-icon">
<span class="socicon socicon-feedburner" style="padding: 10px; font-size: 16px; background-color: #ffcc00"></span></a></li></ul></div></section><section id="adswidget3-quick-adsense-2" class="widget widget_adswidget3-quick-adsense"><div class="widget-wrap"><div class="pub-ad" style="margin-top: 10px; margin-bottom: 6px; width: 300px;height: 270px;"><div id="bsa-zone_1573665857798-3_123456" data-google-query-id="CMqSxuqZ_u4CFdHDwAodyzkDMQ"><div id="google_ads_iframe_/8691100/HowtodoinJava_S2S_RightRail_3_0__container__" style="border: 0pt none; display: inline-block; width: 300px; height: 250px;"><iframe frameborder="0" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/container(1).html" id="google_ads_iframe_/8691100/HowtodoinJava_S2S_RightRail_3_0" title="3rd party ad content" name="" scrolling="no" marginwidth="0" marginheight="0" width="300" height="250" data-is-safeframe="true" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" data-google-container-id="n" style="border: 0px; vertical-align: bottom;" data-load-complete="true"></iframe></div></div></div></div></section><section id="adswidget4-quick-adsense-5" class="widget widget_adswidget4-quick-adsense"><div class="widget-wrap"><div class="pub-ad" style="margin-top: 10px; margin-bottom: 6px; width: 300px;height: 270px;"><div id="bsa-zone_1573665929866-9_123456" data-google-query-id="CMuSxuqZ_u4CFdHDwAodyzkDMQ"><div id="google_ads_iframe_/8691100/HowtodoinJava_S2S_RightRail_4_0__container__" style="border: 0pt none; display: inline-block; width: 300px; height: 250px;"><iframe frameborder="0" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/container(2).html" id="google_ads_iframe_/8691100/HowtodoinJava_S2S_RightRail_4_0" title="3rd party ad content" name="" scrolling="no" marginwidth="0" marginheight="0" width="300" height="250" data-is-safeframe="true" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" data-google-container-id="o" style="border: 0px; vertical-align: bottom;" data-load-complete="true"></iframe></div></div></div></div></section><section id="adswidget1-quick-adsense-2" class="widget widget_adswidget1-quick-adsense"><div class="widget-wrap"><div class="pub-ad" style="margin-top: 10px; margin-bottom: 10px; width: 300px;height: 620px;"><div id="bsa-zone_1572302500073-4_123456" data-google-query-id="CMaSxuqZ_u4CFdHDwAodyzkDMQ"><div id="google_ads_iframe_/8691100/Howtodoinjava_S2S_RightRail_1_0__container__" style="border: 0pt none; display: inline-block; width: 300px; height: 600px;"><iframe frameborder="0" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/container(3).html" id="google_ads_iframe_/8691100/Howtodoinjava_S2S_RightRail_1_0" title="3rd party ad content" name="" scrolling="no" marginwidth="0" marginheight="0" width="300" height="600" data-is-safeframe="true" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" data-google-container-id="j" style="border: 0px; vertical-align: bottom;" data-load-complete="true"></iframe></div></div></div></div></section><section id="adswidget2-quick-adsense-2" class="widget widget_adswidget2-quick-adsense"><div class="widget-wrap"><div class="pub-ad" style="margin-top: 10px; margin-bottom: 10px; width: 300px;height: 600px;"><div id="bsa-zone_1572302561355-9_123456" data-google-query-id="CMeSxuqZ_u4CFdHDwAodyzkDMQ"><div id="google_ads_iframe_/8691100/Howtodoinjava_S2S_RightRail_2_0__container__" style="border: 0pt none; display: inline-block; width: 300px; height: 600px;"><iframe frameborder="0" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/container(4).html" id="google_ads_iframe_/8691100/Howtodoinjava_S2S_RightRail_2_0" title="3rd party ad content" name="" scrolling="no" marginwidth="0" marginheight="0" width="300" height="600" data-is-safeframe="true" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" data-google-container-id="k" style="border: 0px; vertical-align: bottom;" data-load-complete="true"></iframe></div></div></div></div></section>
</aside></div><aside class="sidebar sidebar-secondary widget-area" role="complementary" aria-label="Secondary Sidebar"><section id="nav_menu-41" class="widget widget_nav_menu"><div class="widget-wrap"><h4 class="widget-title widgettitle">Java Concurrency Tutorial</h4><div class="menu-java-concurrency-1-container"><ul id="menu-java-concurrency-1" class="menu"><li id="menu-item-8069" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8069"><a href="https://howtodoinjava.com/java-concurrency-tutorial/">Java Concurrency – Introduction</a></li><li id="menu-item-5617" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5617"><a href="https://howtodoinjava.com/java/multi-threading/java-multi-threading-evolution-and-topics/">Concurrency Evolution</a></li><li id="menu-item-5622" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5622"><a href="https://howtodoinjava.com/java/multi-threading/what-is-thread-safety/">Thread Safety</a></li><li id="menu-item-5615" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5615"><a href="https://howtodoinjava.com/java/multi-threading/concurrency-vs-parallelism/">Concurrency vs. Parallelism</a></li><li id="menu-item-5625" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5625"><a href="https://howtodoinjava.com/java/multi-threading/compare-and-swap-cas-algorithm/">Compare and Swap [CAS]</a></li><li id="menu-item-12100" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-12100"><a href="https://howtodoinjava.com/java/keywords/java-synchronized/">synchronized keyword</a></li><li id="menu-item-5623" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5623"><a href="https://howtodoinjava.com/java/multi-threading/object-vs-class-level-locking/">Object vs. Class Level Locking</a></li><li id="menu-item-5630" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5630"><a href="https://howtodoinjava.com/java/multi-threading/java-runnable-vs-thread/">Runnable vs. Thread</a></li><li id="menu-item-5626" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5626"><a href="https://howtodoinjava.com/java/multi-threading/wait-notify-and-notifyall-methods/">wait(), notify() and notifyAll()</a></li><li id="menu-item-5628" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5628"><a href="https://howtodoinjava.com/java/multi-threading/difference-between-yield-and-join-in-threads-in-java/">Yield() vs. Join()</a></li><li id="menu-item-5629" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5629"><a href="https://howtodoinjava.com/java/multi-threading/sleep-vs-wait/">Sleep() vs. Wait()</a></li><li id="menu-item-5627" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5627"><a href="https://howtodoinjava.com/java/multi-threading/multithreading-difference-between-lock-and-monitor/">Lock vs. Monitor</a></li><li id="menu-item-5618" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5618"><a href="https://howtodoinjava.com/java/multi-threading/java-callable-future-example/">Callable + Future</a></li><li id="menu-item-5638" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5638"><a href="https://howtodoinjava.com/java/multi-threading/restart-thread-uncaughtexceptionhandler/">UncaughtExceptionHandler</a></li><li id="menu-item-5634" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5634"><a href="https://howtodoinjava.com/java/multi-threading/throttling-task-submission-rate-using-threadpoolexecutor-and-semaphore/">Throttling Task Submission</a></li><li id="menu-item-5635" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5635"><a href="https://howtodoinjava.com/java/multi-threading/executor-framework-tutorial/">Executor Best Practices</a></li><li id="menu-item-5641" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5641"><a href="https://howtodoinjava.com/java/multi-threading/inter-thread-communication-using-piped-streams-in-java/">Inter-thread Communication</a></li><li id="menu-item-5643" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5643"><a href="https://howtodoinjava.com/java/multi-threading/writing-a-deadlock-and-resolving-in-java/">Write and Resolve Deadlock</a></li></ul></div></div></section>
<section id="nav_menu-63" class="widget widget_nav_menu"><div class="widget-wrap"><h4 class="widget-title widgettitle">Java Concurrency Utilities</h4><div class="menu-java-concurrency-2-container"><ul id="menu-java-concurrency-2" class="menu"><li id="menu-item-12466" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-12466"><a href="https://howtodoinjava.com/java/multi-threading/atomicinteger-example/">AtomicInteger</a></li><li id="menu-item-8058" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-8058"><a href="https://howtodoinjava.com/java/multi-threading/how-to-use-locks-in-java-java-util-concurrent-locks-lock-tutorial-and-example/">Lock</a></li><li id="menu-item-8057" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-8057"><a href="https://howtodoinjava.com/java/multi-threading/creating-threads-using-java-util-concurrent-threadfactory/">ThreadFactory</a></li><li id="menu-item-8059" class="menu-item menu-item-type-post_type menu-item-object-post current-menu-item menu-item-8059"><a href="https://howtodoinjava.com/java/multi-threading/when-and-how-to-use-thread-local-variables/" aria-current="page">ThreadLocal</a></li><li id="menu-item-12571" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-12571"><a href="https://howtodoinjava.com/java/multi-threading/executor-service-example/">ExecutorService</a></li><li id="menu-item-8061" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-8061"><a href="https://howtodoinjava.com/java/multi-threading/java-thread-pool-executor-example/">ThreadPoolExecutor</a></li><li id="menu-item-8060" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-8060"><a href="https://howtodoinjava.com/java/multi-threading/java-fixed-size-thread-pool-executor-example/">FixedSizeThreadPoolExecutor</a></li><li id="menu-item-8062" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-8062"><a href="https://howtodoinjava.com/java/multi-threading/task-scheduling-with-executors-scheduledthreadpoolexecutor-example/">ScheduledThreadPoolExecutor</a></li><li id="menu-item-8068" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-8068"><a href="https://howtodoinjava.com/java/multi-threading/control-concurrent-access-to-multiple-copies-of-a-resource-using-semaphore/">Semaphore</a></li><li id="menu-item-8063" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-8063"><a href="https://howtodoinjava.com/java/multi-threading/binary-semaphore-tutorial-and-example/">Binary Semaphore</a></li><li id="menu-item-8064" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-8064"><a href="https://howtodoinjava.com/java/multi-threading/how-to-use-blockingqueue-and-threadpoolexecutor-in-java/">BlockingQueue</a></li><li id="menu-item-12589" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-12589"><a href="https://howtodoinjava.com/java/multi-threading/java-delayqueue/">DelayQueue</a></li><li id="menu-item-8065" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-8065"><a href="https://howtodoinjava.com/java/multi-threading/non-blocking-thread-safe-list-concurrentlinkeddeque-example/">ConcurrentLinkedDeque</a></li><li id="menu-item-8066" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-8066"><a href="https://howtodoinjava.com/java/multi-threading/when-to-use-countdownlatch-java-concurrency-example-tutorial/">CountDownLatch</a></li><li id="menu-item-8067" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-8067"><a href="https://howtodoinjava.com/java7/forkjoin-framework-tutorial-forkjoinpool-example/">ForkJoinPool</a></li></ul></div></div></section>
<section id="nav_menu-141" class="widget widget_nav_menu"><div class="widget-wrap"><h4 class="widget-title widgettitle">Java Tutorial</h4><div class="menu-java-tutorials-index-container"><ul id="menu-java-tutorials-index" class="menu"><li id="menu-item-13598" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13598"><a href="https://howtodoinjava.com/java/basics/java-tutorial/">Java Introduction</a></li><li id="menu-item-13599" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13599"><a href="https://howtodoinjava.com/java-keywords/">Java Keywords</a></li><li id="menu-item-13600" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13600"><a href="https://howtodoinjava.com/java/flow-control/control-flow-statements/">Java Flow Control</a></li><li id="menu-item-13601" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13601"><a href="https://howtodoinjava.com/java/oops/object-oriented-programming/">Java OOP</a></li><li id="menu-item-13602" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-13602"><a href="https://howtodoinjava.com/java/inner-classes/">Java Inner Class</a></li><li id="menu-item-13603" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13603"><a href="https://howtodoinjava.com/java-string/">Java String</a></li><li id="menu-item-13604" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13604"><a href="https://howtodoinjava.com/java/enum/enum-tutorial/">Java Enum</a></li><li id="menu-item-13605" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13605"><a href="https://howtodoinjava.com/java-collections/">Java Collections</a></li><li id="menu-item-13607" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13607"><a href="https://howtodoinjava.com/java-arraylist/">Java ArrayList</a></li><li id="menu-item-13606" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13606"><a href="https://howtodoinjava.com/java-hashmap/">Java HashMap</a></li><li id="menu-item-13608" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13608"><a href="https://howtodoinjava.com/java-array/">Java Array</a></li><li id="menu-item-13609" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13609"><a href="https://howtodoinjava.com/java-sorting-guide/">Java Sort</a></li><li id="menu-item-13610" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13610"><a href="https://howtodoinjava.com/java/cloning/a-guide-to-object-cloning-in-java/">Java Clone</a></li><li id="menu-item-13611" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13611"><a href="https://howtodoinjava.com/java-date-and-time-apis/">Java Date Time</a></li><li id="menu-item-13612" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13612"><a href="https://howtodoinjava.com/java-concurrency-tutorial/">Java Concurrency</a></li><li id="menu-item-13613" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13613"><a href="https://howtodoinjava.com/java/generics/complete-java-generics-tutorial/">Java Generics</a></li><li id="menu-item-13614" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13614"><a href="https://howtodoinjava.com/java/serialization/java-serialization/">Java Serialization</a></li><li id="menu-item-13616" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13616"><a href="https://howtodoinjava.com/java-io-tutorial/">Java Input Output</a></li><li id="menu-item-13617" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13617"><a href="https://howtodoinjava.com/java-nio-tutorials/">Java New I/O</a></li><li id="menu-item-13618" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-13618"><a href="https://howtodoinjava.com/java/exception-handling/">Java Exceptions</a></li><li id="menu-item-13597" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13597"><a href="https://howtodoinjava.com/java/annotations/complete-java-annotations-tutorial/">Java Annotations</a></li><li id="menu-item-13615" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13615"><a href="https://howtodoinjava.com/java/reflection/real-usage-examples-of-reflection-in-java/">Java Reflection</a></li><li id="menu-item-13619" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-13619"><a href="https://howtodoinjava.com/java/garbage-collection/">Java Garbage collection</a></li><li id="menu-item-13620" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13620"><a href="https://howtodoinjava.com/jdbc-tutorials/">Java JDBC</a></li><li id="menu-item-13621" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13621"><a href="https://howtodoinjava.com/java/java-security/how-to-generate-secure-password-hash-md5-sha-pbkdf2-bcrypt-examples/">Java Security</a></li><li id="menu-item-13622" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13622"><a href="https://howtodoinjava.com/java-regular-expression-tutorials/">Java Regex</a></li><li id="menu-item-13623" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13623"><a href="https://howtodoinjava.com/java/servlets/complete-java-servlets-tutorial/">Java Servlets</a></li><li id="menu-item-13624" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13624"><a href="https://howtodoinjava.com/java/xml/read-xml-dom-parser-example/">Java XML</a></li><li id="menu-item-13625" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13625"><a href="https://howtodoinjava.com/java-interview-puzzles-answers/">Java Puzzles</a></li><li id="menu-item-13627" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13627"><a href="https://howtodoinjava.com/java-examples/examples/">Java Examples</a></li><li id="menu-item-13628" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13628"><a href="https://howtodoinjava.com/java/library/readingwriting-excel-files-in-java-poi-tutorial/">Java Libraries</a></li><li id="menu-item-13629" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-13629"><a href="https://howtodoinjava.com/resources/">Java Resources</a></li><li id="menu-item-13630" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13630"><a href="https://howtodoinjava.com/java14/java14-new-features/">Java 14</a></li><li id="menu-item-13631" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13631"><a href="https://howtodoinjava.com/java12/new-features-enhancements/">Java 12</a></li><li id="menu-item-13632" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13632"><a href="https://howtodoinjava.com/java11/features-enhancements/">Java 11</a></li><li id="menu-item-13633" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13633"><a href="https://howtodoinjava.com/java10/java10-features/">Java 10</a></li><li id="menu-item-13634" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13634"><a href="https://howtodoinjava.com/java9/java9-new-features-enhancements/">Java 9</a></li><li id="menu-item-13635" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13635"><a href="https://howtodoinjava.com/java-8-tutorial/">Java 8</a></li><li id="menu-item-13636" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-13636"><a href="https://howtodoinjava.com/java7/java-7-changes-features-and-enhancements/">Java 7</a></li></ul></div></div></section>
</aside></div></div><div class="footer-widgets"><div class="wrap"><div class="widget-area footer-widgets-1 footer-widget-area"><section id="nav_menu-6" class="widget widget_nav_menu"><div class="widget-wrap"><h4 class="widget-title widgettitle">Meta Links</h4><div class="menu-meta-links-container"><ul id="menu-meta-links" class="menu"><li id="menu-item-3571" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3571"><a href="https://howtodoinjava.com/about/">About Me</a></li><li id="menu-item-3570" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3570"><a href="https://howtodoinjava.com/contact/">Contact Us</a></li><li id="menu-item-3568" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3568"><a href="https://howtodoinjava.com/privacy-policy/">Privacy policy</a></li><li id="menu-item-3574" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3574"><a href="https://howtodoinjava.com/advertise/">Advertise</a></li><li id="menu-item-13595" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13595"><a href="https://howtodoinjava.com/guest-and-sponsored-posts/">Guest and Sponsored Posts</a></li></ul></div></div></section></div><div class="widget-area footer-widgets-2 footer-widget-area"><section id="nav_menu-118" class="widget widget_nav_menu"><div class="widget-wrap"><h4 class="widget-title widgettitle">Recommended Reading</h4><div class="menu-recommended-reading-container"><ul id="menu-recommended-reading" class="menu"><li id="menu-item-5713" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5713"><a title="10 Life Lessions" href="https://howtodoinjava.com/resources/10-life-lessons-i-have-learned-in-last-few-years/">10 Life Lessons</a></li><li id="menu-item-5724" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5724"><a href="https://howtodoinjava.com/java/java-security/how-to-generate-secure-password-hash-md5-sha-pbkdf2-bcrypt-examples/">Secure Hash Algorithms</a></li><li id="menu-item-5714" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5714"><a href="https://howtodoinjava.com/tomcat/a-birds-eye-view-on-how-web-servers-work/">How Web Servers work?</a></li><li id="menu-item-5717" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5717"><a href="https://howtodoinjava.com/java/io/how-java-io-works-internally/">How Java I/O Works Internally?</a></li><li id="menu-item-5722" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-5722"><a href="https://howtodoinjava.com/resources/best-way-to-learn-java/">Best Way to Learn Java</a></li><li id="menu-item-5733" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-5733"><a href="https://howtodoinjava.com/java-best-practices/">Java Best Practices Guide</a></li><li id="menu-item-9622" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-9622"><a href="https://howtodoinjava.com/microservices/microservices-definition-principles-benefits/">Microservices Tutorial</a></li><li id="menu-item-6405" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-6405"><a title="REST API Tutorial" target="_blank" rel="noopener" href="http://restfulapi.net/">REST API Tutorial</a></li><li id="menu-item-9519" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-9519"><a href="https://howtodoinjava.com/start-new-blog/">How to Start New Blog</a></li></ul></div></div></section></div></div></div><footer class="site-footer"><div class="wrap"><p style="margin: 20px auto;max-width: 800px;">Copyright © 2020 · HowToDoInjava.com · All Rights Reserved. | <a href="https://howtodoinjava.com/sitemap.xml">Sitemap</a></p>
<nav class="nav-secondary" aria-label="Secondary"><div class="wrap"><ul id="menu-java-15" class="menu genesis-nav-menu menu-secondary"><li id="menu-item-17223" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-17223"><a href="https://howtodoinjava.com/java15/java-15-new-features/"><span>Java 15 New Features</span></a></li><li id="menu-item-14659" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-14659"><a href="https://howtodoinjava.com/java15/sealed-classes-interfaces/"><span>Sealed Classes and Interfaces</span></a></li><li id="menu-item-17224" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-17224"><a href="https://howtodoinjava.com/java15/java-eddsa-example/"><span>EdDSA (Ed25519 / Ed448)</span></a></li></ul></div></nav></div></footer></div><script type="text/javascript">(function(){var bsa_optimize=document.createElement('script');bsa_optimize.type='text/javascript';bsa_optimize.async=true;bsa_optimize.src='https://cdn-s2s.buysellads.net/pub/howtodoinjava.js?'+(new Date()-new Date()%3600000);(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa_optimize);})();</script><script type="text/javascript">(function() {
    var cx = '000292789241211868774:cvclu5feha4';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();</script> <script type="text/javascript">window.WPCOM_sharing_counts = {"https:\/\/howtodoinjava.com\/java\/multi-threading\/when-and-how-to-use-thread-local-variables\/":4381};</script> <script type="text/javascript" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/shCore.js" id="syntaxhighlighter-core-js"></script> <script type="text/javascript" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/shBrushJava.js" id="syntaxhighlighter-brush-java-js"></script> <script type="text/javascript">(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://howtodoinjava.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.head.appendChild( corecss );
		var themecssurl = "https://howtodoinjava.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeMidnight.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		document.head.appendChild( themecss );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}</script> <script type="text/javascript" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/photon.min.js" id="jetpack-photon-js"></script> <script type="text/javascript" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/intersectionobserver-polyfill.min.js" id="jetpack-lazy-images-polyfill-intersectionobserver-js"></script> <script type="text/javascript" id="jetpack-lazy-images-js-extra">/*  */
var jetpackLazyImagesL10n = {"loading_warning":"Images are still loading. Please cancel your print and try again."};
/*  */</script> <script type="text/javascript" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/lazy-images.min.js" id="jetpack-lazy-images-js"></script> <script type="text/javascript" id="helpful-js-extra">/*  */
var helpful = {"ajax_url":"https:\/\/howtodoinjava.com\/wp-admin\/admin-ajax.php","ajax_data":{"user_id":"c750027088b098e3d20b36704a9dcd98","_wpnonce":"ab8f17e279"},"translations":{"fieldIsRequired":"This field is required."},"ajax_session":{"helpful_user":"c750027088b098e3d20b36704a9dcd98"}};
/*  */</script> <script type="text/javascript" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/helpful.js" id="helpful-js"></script> <script type="text/javascript" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/collapsable.js" id="the_js-js"></script> <script type="text/javascript" id="sharing-js-js-extra">/*  */
var sharing_js_options = {"lang":"en","counts":"1","is_stats_active":"1"};
/*  */</script> <script async="true" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/saved_resource(1)"></script><script type="text/javascript" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/sharing.min.js" id="sharing-js-js"></script> <script type="text/javascript" id="sharing-js-js-after">var windowOpen;
			document.body.addEventListener( 'click', function ( event ) {
				if ( event.target && (
					event.target.matches && event.target.matches( 'a.share-twitter' ) ||
					event.target.msMatchesSelector && event.target.msMatchesSelector( 'a.share-twitter' )
				) ) {
					// If there's another sharing window open, close it.
					if ( typeof windowOpen !== 'undefined' ) {
						windowOpen.close();
					}
					windowOpen = window.open( event.target.getAttribute( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
					return false;
				}
			} );
var windowOpen;
			document.body.addEventListener( 'click', function ( event ) {
				if ( event.target && (
					event.target.matches && event.target.matches( 'a.share-facebook' ) ||
					event.target.msMatchesSelector && event.target.msMatchesSelector( 'a.share-facebook' )
				) ) {
					// If there's another sharing window open, close it.
					if ( typeof windowOpen !== 'undefined' ) {
						windowOpen.close();
					}
					windowOpen = window.open( event.target.getAttribute( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
					return false;
				}
			} );
var windowOpen;
			document.body.addEventListener( 'click', function ( event ) {
				if ( event.target && (
					event.target.matches && event.target.matches( 'a.share-linkedin' ) ||
					event.target.msMatchesSelector && event.target.msMatchesSelector( 'a.share-linkedin' )
				) ) {
					// If there's another sharing window open, close it.
					if ( typeof windowOpen !== 'undefined' ) {
						windowOpen.close();
					}
					windowOpen = window.open( event.target.getAttribute( 'href' ), 'wpcomlinkedin', 'menubar=1,resizable=1,width=580,height=450' );
					return false;
				}
			} );</script> <script src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/e-202108.js" defer="" type="text/javascript"></script> <script type="text/javascript">_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:9.4',blog:'51174612',post:'4381',tz:'5.5',srv:'howtodoinjava.com'} ]);
	_stq.push([ 'clickTrackerInit', '51174612', '4381' ]);</script> 
<!-- Performance optimized by W3 Total Cache. Learn more: https://www.w3-edge.com/products/

Page Caching using disk: enhanced
Database Caching 139/261 queries in 0.245 seconds using disk

 Served from: howtodoinjava.com @ 2021-02-22 23:01:29 by W3 Total Cache --><img src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/g.gif" alt=":)" width="6" height="5" id="wpstats"><iframe src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/syncframe.html" id="criteo-syncframe" style="display: none;"></iframe><iframe id="google_osd_static_frame_8199895919812" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/saved_resource(4).html"></iframe><iframe src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/iu3.html" style="display: none;"></iframe></body><iframe sandbox="allow-scripts allow-same-origin" id="636cc1453c57ed2" frameborder="0" allowtransparency="true" marginheight="0" marginwidth="0" width="0" hspace="0" vspace="0" height="0" style="height:0px;width:0px;display:none;" scrolling="no" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/pd.html">
    </iframe><iframe sandbox="allow-scripts allow-same-origin" id="641b81c28374648" frameborder="0" allowtransparency="true" marginheight="0" marginwidth="0" width="0" hspace="0" vspace="0" height="0" style="height:0px;width:0px;display:none;" scrolling="no" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/async_usersync.html">
    </iframe><iframe sandbox="allow-scripts allow-same-origin" id="650893c6ffa6f5c" frameborder="0" allowtransparency="true" marginheight="0" marginwidth="0" width="0" hspace="0" vspace="0" height="0" style="height:0px;width:0px;display:none;" scrolling="no" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/CookieSyncV.html">
    </iframe><iframe sandbox="allow-scripts allow-same-origin" id="66280c00763c1b" frameborder="0" allowtransparency="true" marginheight="0" marginwidth="0" width="0" hspace="0" vspace="0" height="0" style="height:0px;width:0px;display:none;" scrolling="no" src="./When and How to Use ThreadLocal Variables _ ThreadLocal Tutorial and Examples_files/beacon.html">
    </iframe></html>